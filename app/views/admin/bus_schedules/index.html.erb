<%# List all bus schedules %>

<% content_for(:page_title, "Bus Schedules") %>

<%# Page Header with Add Button %>
<div class="flex justify-between items-center mb-6">
  <p class="text-gray-600">Manage all bus schedules</p>
  <%= link_to new_admin_bus_schedule_path,
      class: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" do %>
    + New Schedule
  <% end %>
</div>

<%# Schedules Table %>
<div class="bg-white rounded-lg shadow overflow-hidden">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Route
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Bus
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Departure
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Arrival
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Seats
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Price
        </th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Status
        </th>
        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
          Actions
        </th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <% @bus_schedules.each do |schedule| %>
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm font-medium text-gray-900">
              <%= schedule.route.origin_province.name %> â†’
              <%= schedule.route.destination_province.name %>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm text-gray-900"><%= schedule.bus.plate_number %></div>
            <div class="text-sm text-gray-500"><%= schedule.bus.model %></div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm text-gray-900">
              <%= schedule.departure_time.strftime("%b %d, %Y") %>
            </div>
            <div class="text-sm text-gray-500">
              <%= schedule.departure_time.strftime("%H:%M") %>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="text-sm text-gray-900">
              <%= schedule.arrival_time.strftime("%b %d, %Y") %>
            </div>
            <div class="text-sm text-gray-500">
              <%= schedule.arrival_time.strftime("%H:%M") %>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
            <%= schedule.available_seats %>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
            $<%= number_with_precision(schedule.seat_price, precision: 2) %>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <%= schedule.status.humanize %>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
            <%= link_to "View", admin_bus_schedule_path(schedule),
                class: "text-blue-600 hover:text-blue-900 mr-3" %>
            <%= link_to "Edit", edit_admin_bus_schedule_path(schedule),
                class: "text-yellow-600 hover:text-yellow-900 mr-3" %>
            <%= link_to "Delete", admin_bus_schedule_path(schedule),
                method: :delete,
                data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this schedule?" },
                class: "text-red-600 hover:text-red-900" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <% if @bus_schedules.empty? %>
    <div class="text-center py-12">
      <p class="text-gray-500 mb-4">No bus schedules found</p>
      <%= link_to "Create your first schedule", new_admin_bus_schedule_path,
          class: "text-blue-600 hover:text-blue-800 font-medium" %>
    </div>
  <% end %>
</div>
